<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Gallery</title>
    <style>
        .video-thumbnail {
            width: 200px;
            height: 150px;
            display: inline-block;
            margin: 10px;
            cursor: pointer;
            background-color: #ccc;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .video-player {
            display: none;
            width: 640px;
            height: 360px;
            margin-top: 20px;
        }
    </style>
</head>

<body>
    <h1>Video Gallery</h1>
    <div id="video-gallery">
        <!-- 비디오 썸네일이 여기에 동적으로 추가됩니다. -->
    </div>
    <div class="video-player" id="video-player">
        <video id="video" controls>
            <source id="video-source" src="" type="video/mp4">
            Your browser does not support the video tag.
        </video>
    </div>

    <script>
        // 서버에서 비디오 URL 받아오기
        fetch('/video-urls')
            .then(response => response.json())
            .then(videoUrls => {
                console.log('Fetched video URLs:', videoUrls); // 디버깅용 콘솔 로그
                if (Array.isArray(videoUrls)) { // videoUrls가 배열인지 확인
                    const gallery = document.getElementById('video-gallery');
                    videoUrls.forEach((url, index) => {
                        const thumbnail = document.createElement('div');
                        thumbnail.className = 'video-thumbnail';
                        thumbnail.innerText = `Video ${index + 1}`;
                        thumbnail.addEventListener('click', () => playVideo(url));
                        gallery.appendChild(thumbnail);
                    });
                } else {
                    console.error('Fetched data is not an array:', videoUrls);
                }
            })
            .catch(error => {
                console.error('Error fetching video URLs:', error); // 에러 디버깅용 콘솔 로그
            });

        // 비디오 재생 함수
        function playVideo(url) {
            const videoPlayer = document.getElementById('video-player');
            const video = document.getElementById('video');
            const videoSource = document.getElementById('video-source');
            videoSource.src = url;
            video.load();
            videoPlayer.style.display = 'block';
        }
    </script>
</body>

</html>